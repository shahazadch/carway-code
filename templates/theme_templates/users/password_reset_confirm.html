{% load static %}
<!DOCTYPE html>
<html lang="en" data-bs-theme="light" data-pwa="true">
  <head>
    <meta charset="utf-8">

    <!-- Viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover">

    <!-- SEO Meta Tags -->
    <title>CarWay | New Password</title>
    <meta name="description" content="CarWay - The best place to buy and sell cars online">
    <meta name="keywords" content="car dealer, car marketplace, car sale, used cars, new cars">
    <meta name="author" content="CarWay Team">

    <!-- Webmanifest + Favicon / App icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="manifest" href="{% static 'theme/manifest.json' %}">
    <link rel="icon" type="image/png" href="{% static 'theme/app-icons/icon-32x32.png' %}" sizes="32x32">
    <link rel="apple-touch-icon" href="{% static 'theme/app-icons/icon-180x180.png' %}">

    <!-- Theme switcher (color modes) -->
    <script src="{% static 'theme/js/theme-switcher.js' %}"></script>

    <!-- Preloaded local web font (Inter) -->
    <link rel="preload" href="{% static 'theme/fonts/inter-variable-latin.woff2' %}" as="font" type="font/woff2" crossorigin>

    <!-- Font icons -->
    <link rel="preload" href="{% static 'theme/icons/finder-icons.woff2' %}" as="font" type="font/woff2" crossorigin>
    <link rel="stylesheet" href="{% static 'theme/icons/finder-icons.min.css' %}">

    <!-- Bootstrap + Theme styles -->
    <link rel="preload" href="{% static 'theme/css/theme.min.css' %}" as="style">
    <link rel="preload" href="{% static 'theme/css/theme.rtl.min.css' %}" as="style">
    <link rel="stylesheet" href="{% static 'theme/css/theme.min.css' %}" id="theme-styles">
  </head>


  <!-- Body -->
  <body>

    <!-- Page content -->
    <main class="content-wrapper w-100 px-3 ps-lg-5 pe-lg-4 mx-auto" style="max-width: 1920px">
      <div class="d-lg-flex">

        <!-- Login form + Footer -->
        <div class="d-flex flex-column min-vh-100 w-100 py-4 mx-auto me-lg-5" style="max-width: 416px">

          <!-- Logo -->
          <header class="navbar align-items-center px-0 pb-4 mt-n2 mt-sm-0 mb-2 mb-md-3 mb-lg-4">
            <a class="navbar-brand pt-0" href="{% url 'home' %}">
              <span class="d-flex flex-shrink-0 text-primary rtl-flip me-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="35" height="34"><path d="M34.5 16.894v10.731c0 3.506-2.869 6.375-6.375 6.375H17.5h-.85C7.725 33.575.5 26.138.5 17c0-9.35 7.65-17 17-17s17 7.544 17 16.894z" fill="currentColor"/><g fill-rule="evenodd"><path d="M17.5 13.258c-3.101 0-5.655 2.554-5.655 5.655s2.554 5.655 5.655 5.655 5.655-2.554 5.655-5.655-2.554-5.655-5.655-5.655zm-9.433 5.655c0-5.187 4.246-9.433 9.433-9.433s9.433 4.246 9.433 9.433a9.36 9.36 0 0 1-1.569 5.192l2.397 2.397a1.89 1.89 0 0 1 0 2.671 1.89 1.89 0 0 1-2.671 0l-2.397-2.397a9.36 9.36 0 0 1-5.192 1.569c-5.187 0-9.433-4.246-9.433-9.433z" fill="#000" fill-opacity=".05"/><g fill="#fff"><path d="M17.394 10.153c-3.723 0-6.741 3.018-6.741 6.741s3.018 6.741 6.741 6.741 6.741-3.018 6.741-6.741-3.018-6.741-6.741-6.741zM7.347 16.894A10.05 10.05 0 0 1 17.394 6.847 10.05 10.05 0 0 1 27.44 16.894 10.05 10.05 0 0 1 17.394 26.94 10.05 10.05 0 0 1 7.347 16.894z"/><path d="M23.025 22.525c.645-.645 1.692-.645 2.337 0l3.188 3.188c.645.645.645 1.692 0 2.337s-1.692.645-2.337 0l-3.187-3.187c-.645-.646-.645-1.692 0-2.337z"/></g></g><path d="M23.662 14.663c2.112 0 3.825-1.713 3.825-3.825s-1.713-3.825-3.825-3.825-3.825 1.713-3.825 3.825 1.713 3.825 3.825 3.825z" fill="#fff"/><path fill-rule="evenodd" d="M23.663 8.429a2.41 2.41 0 0 0-2.408 2.408 2.41 2.41 0 0 0 2.408 2.408 2.41 2.41 0 0 0 2.408-2.408 2.41 2.41 0 0 0-2.408-2.408zm-5.242 2.408c0-2.895 2.347-5.242 5.242-5.242s5.242 2.347 5.242 5.242-2.347 5.242-5.242 5.242-5.242-2.347-5.242-5.242z" fill="currentColor"/></svg>
              </span>
              CarWay
            </a>
          </header>

          <h1 class="h2 mt-auto">Set New Password</h1>
          <p class="pb-2 pb-md-3">Create a new password for your account.</p>

          {% if validlink %}
          <!-- Form -->
          <form class="needs-validation pb-4 mb-3 mb-lg-4" method="post" novalidate>
            {% csrf_token %}
            {% if form.non_field_errors %}
            <div class="alert alert-danger">
              {% for error in form.non_field_errors %}
                {{ error }}
              {% endfor %}
            </div>
            {% endif %}
            <div class="mb-4">
              <label for="id_new_password1" class="form-label">New Password</label>
              <div class="password-toggle">
                <input type="password" name="new_password1" class="form-control form-control-lg" id="id_new_password1" minlength="8" placeholder="Minimum 8 characters" required>
                {% if form.new_password1.errors %}
                <div class="invalid-tooltip bg-transparent py-0">{{ form.new_password1.errors.0 }}</div>
                {% endif %}
                <label class="password-toggle-button fs-lg" aria-label="Show/hide password">
                  <input type="checkbox" class="btn-check">
                </label>
              </div>
            </div>
            <div class="mb-4">
              <label for="id_new_password2" class="form-label">Confirm New Password</label>
              <div class="password-toggle">
                <input type="password" name="new_password2" class="form-control form-control-lg" id="id_new_password2" minlength="8" placeholder="Confirm new password" required>
                {% if form.new_password2.errors %}
                <div class="invalid-tooltip bg-transparent py-0">{{ form.new_password2.errors.0 }}</div>
                {% endif %}
                <label class="password-toggle-button fs-lg" aria-label="Show/hide password">
                  <input type="checkbox" class="btn-check">
                </label>
              </div>
            </div>
            <button type="submit" class="btn btn-lg btn-primary w-100">Set New Password</button>
          </form>
          {% else %}
          <div class="alert alert-danger mb-4">
            <i class="fi-x-circle me-2"></i>
            The password reset link was invalid, possibly because it has already been used. Please request a new password reset.
          </div>
          <div class="d-flex justify-content-center mb-4">
            <a href="{% url 'password_reset' %}" class="btn btn-lg btn-primary">Request New Reset Link</a>
          </div>
          {% endif %}

          <!-- Footer -->
          <footer class="mt-auto">
            <div class="nav mb-4">
              <a class="nav-link text-decoration-underline p-0" href="{% url 'home' %}">Need help?</a>
            </div>
            <p class="fs-xs mb-0">
              &copy; All rights reserved. Made by <a class="hover-effect-underline text-dark-emphasis text-decoration-none" href="https://createx.studio/" target="_blank" rel="noreferrer">Createx Studio</a>
            </p>
          </footer>
        </div>


        <!-- Cover image visible on screens > 992px wide (lg breakpoint) -->
        <div class="d-none d-lg-block w-100 py-4 ms-auto" style="max-width: 1034px">
          <div class="d-flex flex-column justify-content-end h-100 bg-info-subtle rounded-5">
            <div class="ratio" style="--fn-aspect-ratio: calc(1030 / 1032 * 100%)">
              <img src="{% static 'theme/img/account/account-cover.png' %}" alt="Account Cover">
            </div>
          </div>
        </div>
      </div>
    </main>


    <!-- Bootstrap + Theme scripts -->
    <script src="{% static 'theme/vendor/smooth-scroll/dist/smooth-scroll.polyfills.min.js' %}"></script>
    <script src="{% static 'theme/vendor/swiper/swiper-bundle.min.js' %}"></script>
    <script src="{% static 'theme/vendor/simplebar/dist/simplebar.min.js' %}"></script>
    <script src="{% static 'theme/js/theme.min.js' %}"></script>
  </body>
</html>